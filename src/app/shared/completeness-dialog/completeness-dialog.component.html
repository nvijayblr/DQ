<button class="close" mat-icon-button (click)="onNoClick()">
  <mat-icon>close</mat-icon>
</button>
<div mat-dialog-title class="space">
  <div class="flex-containers space-between">
    <div>
      {{data.key}} - {{data.selectedKey}} - {{data.selectedValue}}
      <span *ngIf="selectedColumn.column"> - {{selectedColumn.column}}</span>
    </div>
    <div class="btn-back-wrapper clearfix" [hidden]="!showDetails">
      <button mat-stroked-button class="button3d btnPush btnPurple ebckBtn" (click)="selectedColumn = {}; showDetails = false">
        <mat-icon>keyboard_arrow_left</mat-icon> Back
      </button>
    </div>
  </div>
</div>

<div mat-dialog-content>
  <div class="content-details">
    <div class="table brd-rt flex-containers wrap" *ngIf="!showDetails">
        <mat-card *ngFor="let rowItem of data.details;" (click)="launchAnalysisDetails(rowItem);">
          <div  *ngFor="let item of rowItem | keyvalue" [hidden]="item.key === 'outlier'">
            <span *ngIf="item.key !== 'column'" class="field-label">{{item.key}}: </span> 
            <span class="strong compClr" (click)="launchAnalysisDetails(rowItem);">{{item.value}}</span>
          </div>
        </mat-card>
    </div>

    <div *ngIf="showDetails">
      <mat-card>
        <div  *ngFor="let item of selectedColumn | keyvalue" [hidden]="item.key === 'outlier'">
          <span *ngIf="item.key !== 'column'" class="field-label">{{item.key}}: </span> 
          <span class="strong compClr">{{item.value}}</span>
        </div>
      </mat-card>
      <mat-card fxFlex class="stats process-blocks-table" style="height: 380px">
        <app-ag-grid
          floatingFilter="true"
          [isLoading]="isLoading"
          [rowData]="rowData"
          [columnDefs]="columnDefs"
          [pageSize]="50"
          [rowSelection]="'multiple'"
          [moveToColumn]="selectedColumn.column"
          [suppressRowClickSelection]="false"
        ></app-ag-grid>
      </mat-card>
    </div>
    <app-progress-bar [message]="'Details are loading...'" class="component" *ngIf="isLoading"></app-progress-bar>
  </div>
</div>
