<div class="content" fxFlex>
    <mat-tab-group mat-align-tabs="start"(selectedTabChange)="onSelectTab($event.index,previewDetail,correlationDetail)">
        <mat-tab>
            <ng-template mat-tab-label>
                <!-- <img class="prof" src="assets/images/profile-data.svg"> -->
                Profile
            </ng-template>
            <div class="profileDetail" fxLayout="row">
                <div class="profileTable overflow" [class.collapsed]="showDetail">
                    <table mat-table [dataSource]="tableDataSource">
                        <ng-container matColumnDef="column">
                            <th class="table-column-220" mat-header-cell *matHeaderCellDef> Column Name</th>
                            <td class="table-column-220" mat-cell *matCellDef="let col" [class.active]="col.active">
                                <span *ngIf="showDetail"
                                    [class]="datatypeIcon[col.attributeSummary.dataType][1]+'Icon circleIcon'">
                                    {{datatypeIcon[col.attributeSummary.dataType][0]}}</span>
                                {{col.column}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="dataType">
                            <th class="table-column-150" mat-header-cell *matHeaderCellDef> Datatype </th>
                            <td class="table-column-150" mat-cell *matCellDef="let col">
                                <span [class]="datatypeIcon[col.attributeSummary.dataType][1]+'Icon circleIcon'">
                                    {{datatypeIcon[col.attributeSummary.dataType][0]}}</span>
                                {{col.attributeSummary.dataType}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="nullCount">
                            <th class="table-column-150" mat-header-cell *matHeaderCellDef> Null Records
                            </th>
                            <td class="table-column-150" mat-cell *matCellDef="let col">
                                {{col.attributeSummary.null_records}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="minLength">
                            <th class="table-column-150" mat-header-cell *matHeaderCellDef> Min </th>
                            <td class="table-column-150" mat-cell *matCellDef="let col">
                                {{col.LengthStatistics ?
                                col.LengthStatistics.Min : 0}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="maxLength">
                            <th class="table-column-100" mat-header-cell *matHeaderCellDef> Max </th>
                            <td class="table-column-100" mat-cell *matCellDef="let col">
                                {{col.LengthStatistics ?
                                col.LengthStatistics.Max : 0}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="averageLength">
                            <th class="table-column-100" mat-header-cell *matHeaderCellDef> Average </th>
                            <td class="table-column-100" mat-cell *matCellDef="let col">
                                {{col.LengthStatistics ?
                                col.LengthStatistics.Average : 0}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="medianLength">
                            <th class="table-column-100" mat-header-cell *matHeaderCellDef> Median </th>
                            <td class="table-column-100" mat-cell *matCellDef="let col">
                                {{col.LengthStatistics ?
                                col.LengthStatistics.Median : 0}}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="expand">
                            <th class="table-column-50" mat-header-cell *matHeaderCellDef> </th>
                            <td class="table-column-50" mat-cell *matCellDef="let col">
                                <mat-icon>more_vert</mat-icon>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="noData">
                            <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length"
                                class="center">
                                No Records Found
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></tr>
                        <tr mat-row *matRowDef="let element;let row; columns: displayedColumns;"
                            (click)="showDetailView(element)"></tr>
                        <tr mat-footer-row *matFooterRowDef="['noData']"
                            [hidden]="tableDataSource && tableDataSource.data.length > 0"></tr>
                    </table>
                </div>
                <div class="detailPanel overflow" fxFlex *ngIf="showDetail">
                    <button mat-icon-button class="closeDetail" title="Close Detail" (click)="hideDetailView()">
                        <mat-icon>cancel</mat-icon>
                    </button>
                    <div class="expandPanel" fxLayout="column">
                        <div fxLayout="row">
                            <mat-card class="dashboardCard" fxFlex="50" fxLayout="column">
                                <div class="title"><span>Attribute Summary</span></div>
                                <div fxFlex fxLayout="row">
                                    <div fxFlex="50" fxLayoutAlign="center center">
                                        <span>Datatype :</span>
                                        <!-- <span
                                                    [class]="datatypeIcon[profileDetails.attributeSummary.dataType][1]+'Icon circleIcon'">
                                                    {{datatypeIcon[profileDetails.attributeSummary.dataType][0]}}</span> -->
                                        <span class="valueText paddingLeft"> {{ ' ' +
                                            profileDetails.attributeSummary.dataType}} </span>
                                    </div>
                                    <div fxFlex="50" fxLayoutAlign="center center">
                                        <span>Null Counts :</span>
                                        <span class="valueText paddingLeft"> {{' ' +
                                            profileDetails.attributeSummary.null_records}}</span>
                                    </div>
                                </div>
                            </mat-card>
                            <mat-card class="dashboardCard" fxFlex="50">
                                <div class="title"><span>Length Statistics</span></div>
                                <div>
                                    <ol class="minMaxbar">
                                        <li class="isComplete"><span>Min :</span>
                                            <span>{{profileDetails.LengthStatistics ?
                                                profileDetails.LengthStatistics.Min : 0}}</span>
                                        </li>
                                        <li class="isComplete"><span>Median :</span>
                                            <span>{{profileDetails.LengthStatistics ?
                                                profileDetails.LengthStatistics.Median : 0}}</span>
                                        </li>
                                        <li class="isComplete"><span>Average :</span>
                                            <span>{{profileDetails.LengthStatistics ?
                                                profileDetails.LengthStatistics.Average : 0}}</span>
                                        </li>
                                        <li class="isComplete"><span>Max :</span>
                                            <span>{{profileDetails.LengthStatistics ?
                                                profileDetails.LengthStatistics.Max : 0}}</span>
                                        </li>
                                    </ol>
                                </div>
                            </mat-card>
                        </div>
                        <div fxLayout="row">
                            <mat-card class="dashboardCard" fxFlex="50">
                                <div class="title"><span>Frequency Groups</span></div>
                                <div>
                                    <app-pie-chart [pieChartData]="chartData"></app-pie-chart>
                                </div>
                            </mat-card>
                            <mat-card class="dashboardCard" fxFlex="50">
                                <div class="title"><span>Correlation Summary</span></div>
                                <div>
                                    <mat-tab-group>
                                        <mat-tab label="Positive Correlation">
                                            <div class="innerTable">
                                                <table mat-table
                                                    [dataSource]="profileDetails.correlationSummary?.positiveSummary">
                                                    <ng-container matColumnDef="column">
                                                        <td mat-cell *matCellDef="let column">
                                                            {{column.column}} </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="value">
                                                        <td mat-cell *matCellDef="let column" class="valueText">
                                                            {{column.value}} </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="noData">
                                                        <td mat-footer-cell *matFooterCellDef
                                                            [attr.colspan]="displayedColumns.length" class="center">
                                                            No Correlation Found
                                                        </td>
                                                    </ng-container>
                                                    <tr mat-row *matRowDef="let row; columns: displayedCorColumns;">
                                                    </tr>
                                                    <tr mat-footer-row *matFooterRowDef="['noData']"
                                                        [hidden]="profileDetails.correlationSummary?.positiveSummary?.length > 0">
                                                    </tr>
                                                </table>
                                            </div>
                                        </mat-tab>
                                        <mat-tab label="Negative Correlation">
                                            <table mat-table
                                                [dataSource]="profileDetails.correlationSummary?.negativeSummary">
                                                <ng-container matColumnDef="column">
                                                    <td mat-cell *matCellDef="let column">
                                                        {{column.column}} </td>
                                                </ng-container>
                                                <ng-container matColumnDef="value">
                                                    <td mat-cell *matCellDef="let column" class="valueText">
                                                        {{column.value}} </td>
                                                </ng-container>
                                                <ng-container matColumnDef="noData">
                                                    <td mat-footer-cell *matFooterCellDef
                                                        [attr.colspan]="displayedColumns.length" class="center">
                                                        No Correlation Found
                                                    </td>
                                                </ng-container>
                                                <tr mat-row *matRowDef="let row; columns: displayedCorColumns;">
                                                </tr>
                                                <tr mat-footer-row *matFooterRowDef="['noData']"
                                                    [hidden]="profileDetails.correlationSummary?.negativeSummary?.length>0">
                                                </tr>
                                            </table>
                                        </mat-tab>
                                    </mat-tab-group>
                                </div>
                            </mat-card>
                        </div>
                        <div fxLayout="row">
                            <mat-card class="dashboardCard" fxFlex="50">
                                <div class="title"><span>Pattern Analysis</span></div>
                                <div class="innerTable analysis">
                                    <table mat-table [dataSource]="profileDetails.patternAnalysis">
                                        <ng-container matColumnDef="column">
                                            <td mat-cell *matCellDef="let column">
                                                {{column.unique_values}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="value">
                                            <td mat-cell *matCellDef="let column" class="valueText">
                                                {{column.counts}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="noData">
                                            <td mat-footer-cell *matFooterCellDef
                                                [attr.colspan]="displayedColumns.length" class="center">
                                                No Pattern Found
                                            </td>
                                        </ng-container>
                                        <tr mat-row *matRowDef="let row; columns: displayedCorColumns;">
                                        </tr>
                                        <tr mat-footer-row *matFooterRowDef="['noData']"
                                            [hidden]="profileDetails?.patternAnalysis?.length>0"></tr>
                                    </table>
                                </div>
                            </mat-card>
                            <mat-card class="dashboardCard" fxFlex="50">
                                <div class="title"><span>Mask Analysis</span></div>
                                <div class="innerTable analysis">
                                    <table mat-table [dataSource]="profileDetails.maskAnalysis">
                                        <ng-container matColumnDef="column">
                                            <td mat-cell *matCellDef="let column">
                                                {{column.unique_values}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="value">
                                            <td mat-cell *matCellDef="let column" class="valueText">
                                                {{column.counts}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="noData">
                                            <td mat-footer-cell *matFooterCellDef
                                                [attr.colspan]="displayedColumns.length" class="center">
                                                No Mask Found
                                            </td>
                                        </ng-container>
                                        <tr mat-row *matRowDef="let row; columns: displayedCorColumns;">
                                        </tr>
                                        <tr mat-footer-row *matFooterRowDef="['noData']"
                                            [hidden]="profileDetails?.maskAnalysis?.length>0"></tr>
                                    </table>
                                </div>
                            </mat-card>
                        </div>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <!-- <img class="prev" src="assets/images/preview.svg"> -->
                Preview
            </ng-template>
            <app-preview-detail1 [source]="selectedSource" #previewDetail></app-preview-detail1>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <!-- <img _ngcontent-cgb-c25="" class="prof" src="assets/images/correlation.svg"> -->
                Correlation
            </ng-template>
            <app-correlation-detail [source]="selectedSource" #correlationDetail></app-correlation-detail>
        </mat-tab>
    </mat-tab-group>
</div>