<section class="page-body home-bodys" *ngIf="showAllDetails">
  <div class="container">
    <div class="">
      <mat-card class="border no-rounded list shrare-post mct noFile">
        <h1 class="no-margin ms nTitle inlb">Please Upload your Source</h1>
        <div class="createLft inlb">
          <button type="button" class="btnBlueGreenN addico"
          (click)="createSource()" >
          <mat-icon>add</mat-icon>
          Upload Source
          </button>
        </div>
      </mat-card>      
    </div>
</div>
</section>

<!-- <button (click)="showConditionalFormulaEditor()">Formula</button> -->

<section class="page-body home-bodys wts" *ngIf="!showAllDetails">
  <div class="container">
    
    <div class="home-wrapper">
      <div class="clearfix my-community-body">
        <div class="home-panel">
          <app-progress-bar [message]="loaderMsg" class="page" *ngIf="isLoading"></app-progress-bar>
          <div class="shrare-post">

          <!-- Source List --> 
          <div class="dashBoard flex-containers">
            <div class="dash-left">
              <div class="srcTop"><mat-icon>widgets</mat-icon> Sources</div>
              <mat-accordion>
                <mat-expansion-panel *ngFor="let item of sourceByCategory; let i = index; first as isFirst" [expanded]="item.category === selectedCategoryKey">
                  <mat-expansion-panel-header>
                    <mat-panel-title>{{ item.category }}</mat-panel-title>                   
                  </mat-expansion-panel-header>
                  <mat-list role="list">
                    <!--  class="activeList" -->
                    <mat-list-item 
                      *ngFor="let data of item.sources; let i= index;">
                    <div class="lftItem" (click)="showEditDetails(i, data)"
                    [class.activeList]="data.sourceId === selectedSource.sourceId">
                      <mat-icon> layers</mat-icon>                     
                        {{data.source.sourceDataName}}
                      </div>
                      <mat-icon class="ed" matTooltip="Edit Source" *ngIf="data.sourceId === selectedSource.sourceId" (click)="editSourceData(data)">edit</mat-icon>
                      <!-- <mat-icon class="de" matTooltip="Delete Source" *ngIf="i===selectedAnalysisIndex" (click)="deleteSourceData(data)">delete</mat-icon> -->
                    </mat-list-item>
                  </mat-list>                                
                </mat-expansion-panel>
              </mat-accordion>
              <div class="list-item-2 text-right" *ngIf="rights.includes('CONFIGURE_SOURCE')">
                <button mat-stroked-button class="btnBlueGreenN addico tdBtn" (click)="createSource()"><mat-icon>open_in_new</mat-icon>  New Source </button>
              </div>
            </div>
            <div class="dash-right">
              <h1 class="no-margin ms nTitle">Summary</h1>
              <div *ngIf="selectedSource">
                <div style="width: 100%;">
                <div>
                  <mat-card class="border no-rounded list shrare-post mct pad10">
                    <div class="summaryBlock fst">
                      <div class="mid-cnt">Type</div>
                      <div class="topTitle green" *ngIf="selectedSource.settings?.multiSourceOptions && selectedSource.settings?.multiSourceOptions.length<=1">S</div>
                      <div class="topTitle green" *ngIf="selectedSource.settings?.multiSourceOptions && selectedSource.settings?.multiSourceOptions.length >1">M</div>                   
                    </div>
                    <div class="dividerTop"></div>
                    <div class="summaryBlock">
                      <div class="mid-cnt">ID </div>
                      <div class="topTitle red" >{{selectedSource.sourceId}}</div>                      
                    </div>
                    <div class="dividerTop"></div>
                    <div class="summaryBlock">
                      <div class="mid-cnt">File Name </div>
                      <div class="topTitle green" >{{selectedSource.source.sourceFileName}}</div>                      
                    </div>

                    <!-- <div class="dividerTop" *ngFor="let ref of data.reference;" ></div> -->
                    <div class="summaryBlock">
                      <div class="mid-cnt">Referennce </div>
                      <div class="topTitle red" >{{selectedSource.referenceId}} - {{selectedSource.referenceDataName}}</div>                      
                    </div>
                  </mat-card>
            
            </div>
            </div>
            </div> 
              <h1 class="no-margin ms nTitle">Details</h1>
              <mat-card class="border no-rounded list shrare-post mct">

                 <!-- Source List -->
                  <div class="analysis-preview">
                    <table class="table">
                        <tbody>
                          <tr  class="tableinner">
                              <td colspan="6" style="padding: 0px;" *ngIf="selectedSource as data">
                                <table style="width: 100%;" >
                                    <!-- <tr>
                                      <td style="width: 10%;">
                                          <div class="source-type" *ngIf="data.settings?.multiSourceOptions && data.settings?.multiSourceOptions.length<=1">S</div>
                                          <div class="source-type" *ngIf="data.settings?.multiSourceOptions && data.settings?.multiSourceOptions.length >1">M</div>
                                        </td>
                                        <td style="width: 10%;">{{data.sourceId}}</td>
                                        <td style="width: 20%;">{{data.source.sourceDataName}}</td>
                                        <td style="width: 20%;">{{data.source.sourceFileName}}</td>
                                        <td style="width: 20%;">
                                          <div *ngFor="let ref of data.reference;">
                                            {{ref.referenceId}} - {{ref.referenceDataName}}
                                          </div>
                                        </td>
                                        <td>
                                    </tr> -->
                                    <tr class="subtab">
                                      <td colspan="6" style="padding: 0px;width: 100%;">
                                        <div class="step-indicator">
                                          <div #step1 class="step uploaded" [ngClass]="{completed: actionTabId === '1'}" (click)="showTab('1');">
                                            <mat-icon class="tick">check_circle</mat-icon>
                                            <span class="text">Data Source</span>                                    
                                          </div>
                                          <div class="step" 
                                            [class.uploaded]="data.rules.length" 
                                            [ngClass]="{completed: actionTabId === '2'}"  
                                            (click)="showTab('2');">
                                            <mat-icon class="tick">check_circle</mat-icon>
                                            <span class="text">Ruleset</span>
                                          </div>
                                          <div class="step" 
                                            [class.disabled]="!data.rules.length" 
                                            [class.uploaded]="data.UploadsHistory.length" 
                                            [ngClass]="{completed: actionTabId === '3'}" 
                                            (click)="data.rules.length && showTab('3');">
                                            <mat-icon class="tick">check_circle</mat-icon>
                                            <span class="text">Data Upload</span>
                                          </div>
                                          <div class="step" 
                                            [class.disabled]="!data.rules.length || !data.UploadsHistory.length" 
                                            [class.uploaded]="data.UploadsHistory.length && data.rules.length" 
                                            [ngClass]="{completed: actionTabId === '4'}" 
                                            (click)="(data.UploadsHistory.length && data.rules.length) && showTab('4');">
                                            <mat-icon class="tick">check_circle</mat-icon>
                                            <span class="text">View Analysis</span>
                                          </div>
                                          <div class="step" 
                                            [class.disabled]="!data.rules.length || !data.UploadsHistory.length" 
                                            [class.uploaded]="data.UploadsHistory.length && data.rules.length" 
                                            [ngClass]="{completed: actionTabId === '5'}" 
                                            (click)="(data.UploadsHistory.length && data.rules.length) && showTab('5');">
                                            <mat-icon class="tick">check_circle</mat-icon>
                                            <span class="text">Data Cleaning</span>
                                          </div>
                                        </div>
                                        <table style="width: 100%;">
                                            <tr class="step1" *ngIf="showFirst">
                                              <td class="bd">
                                                <div class="list flex-containers ml4">
                                                  <div class=" list-item-0  inlb sName">{{data.source.sourceDataName}}</div>
                                                  <div class=" list-item-0  inlb">
                                                    <button type="button" class="button3d btnPush btnBlueGreen addico"
                                                    routerLink="/auth/add-source-data" matTooltip="" >
                                                    <mat-icon>add</mat-icon>
                                                    Create Source
                                                    </button>
                                                  </div>
                                                
                                                  <div class="list-item-0 inlb" *ngIf="rights.includes('EDIT_SOURCE')">
                                                    <button type="button" class="button3d btnPush btnOrange addico"
                                                    (click)="editSourceData(data)" [disabled]="!data.sourceId" matTooltip="">                                           
                                                    <mat-icon>edit</mat-icon>  Edit Source
                                                    </button>
                                                  </div>
                                                
                                                  <div class=" list-item-0  inlb">
                                                    <button type="button" class="button3d btnPush btnPurple addico w-t"
                                                  matTooltip="">
                                                      Disable
                                                    </button>
                                                  </div>
                                                  </div>
                                              </td>
                                            </tr>

                                            <tr class="step2" *ngIf="actionTabId === '2'">
                                              <td class="bd">
                                                <div class="list flex-containers ml4" *ngFor="let rule of data.rules;">
                                                  <div class=" list-item-0 inlb sName" >{{rule.rulesetName}}</div>
                                                  <div class=" list-item-0  inlb" *ngIf="rights.includes('ADD_RULESET')">
                                                    <button type="button" class="button3d btnPush btnBlueGreen addico"
                                                    (click)="data.rulesetId=rule.rulesetId; createEditRuleset(data,'add')" matTooltip="Create Ruleset">
                                                    <mat-icon>add</mat-icon>
                                                    Create Ruleset
                                                    </button>
                                                  </div>
                                                  
                                                  <div class=" list-item-0  inlb" *ngIf="rights.includes('UPDATE_RULESET')">
                                                    <button type="button" class="button3d btnPush btnOrange addico"
                                                    (click)="data.rulesetId=rule.rulesetId; createEditRuleset(data,'edit')" matTooltip="Edit Ruleset">
                                                    <mat-icon>edit</mat-icon> Edit Ruleset
                                                    </button>
                                                  </div>
                                            
                                                  <div class=" list-item-0  inlb">
                                                    <button type="button" class="button3d btnPush btnPurple addico w-t"
                                                  matTooltip="">
                                                      Disable
                                                    </button>
                                                  </div>
                                                </div>
                                                <div class="list flex-containers ml4" *ngIf="!data.rules.length">
                                                  <button type="button" class="button3d btnPush btnBlueGreen addico"
                                                  (click)="createEditRuleset(data,'add')" matTooltip="Create Ruleset">
                                                  <mat-icon>add</mat-icon>
                                                    Create Ruleset
                                                  </button>
                                                </div>
                                              </td>
                                            </tr>
                                            <tr class="step3" *ngIf="actionTabId === '3'">
                                              <td class="bd">
                                                <table style="width: 100%;">
                                                  <tr>
                                                      <td class="bd">
                                                        <div class="outline">
                                                            <mat-form-field appearance="fill">
                                                              <mat-label class="lbl">Multi Source List</mat-label>
                                                              <mat-select [(ngModel)]="data.multisource" [disabled]="data.settings?.multiSourceOptions && data.settings?.multiSourceOptions.length<=1">
                                                                <mat-option *ngFor="let multisource of data.settings?.multiSourceOptions;" [value]="multisource">
                                                                    {{multisource}}
                                                                </mat-option>
                                                              </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                      </td>
                                                      <td style="width: 25%;padding-top: 6px;" class="bd">
                                                        <div *ngIf="rights.includes('ADD_SOURCEFILE')">
                                                          <app-image-cropper 
                                                            [imageType]="'Source'"
                                                            [fileTypes]="'.csv, .xls, .xlsx'"
                                                            [imagePath]="''"
                                                            (fileSelected)="onSourceCSVSelected($event, data)"
                                                          >
                                                          </app-image-cropper>
                                                        </div>
                                                      </td>
                                                      <td class="bd">
                                                        <div class="outline">
                                                            <mat-form-field appearance="fill">
                                                              <mat-label class="lbl">Date</mat-label>
                                                            <input matInput [matDatepicker]="frompicker" [(ngModel)]="data.uploadDate" (click)="frompicker.open()" autocomplete="off">
                                                            <mat-datepicker-toggle matSuffix [for]="frompicker"></mat-datepicker-toggle>
                                                            <mat-datepicker #frompicker (opened)="onOpenDatePicker(data)" [dateClass]="dateClass"></mat-datepicker>
                                                            </mat-form-field>
                                                        </div>
                                                      </td>
                                                      <td class="bd">
                                                        <div class="outline">
                                                            <mat-form-field appearance="fill">
                                                              <mat-label class="lbl">Ruleset Name</mat-label>
                                                                <mat-select [(ngModel)]="data.rulesetId">
                                                                  <mat-option *ngFor="let rule of data.rules;" [value]="rule.rulesetId">
                                                                      {{rule.rulesetName}}
                                                                  </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                      </td> 
                                                      <td style="padding-top:0px;" class="bd">
                                                        <div class="list flex-containers ml3" >
                                                          <div class=" list-item-0  inlb" *ngIf="rights.includes('ADD_SOURCEFILE')">
                                                          <button mat-stroked-button class="button3d btnPush btnBlueGreen addico1" (click)="uploadSource(data)">Upload <mat-icon>cloud_upload</mat-icon></button>
                                                          </div>
                                                          <!-- <div class=" list-item-0  inlb">
                                                            <button class="button3d btnPush btnLightBlue addico v-a1">
                                                              <mat-icon>launch</mat-icon>
                                                              Re upload
                                                            </button>
                                                          </div>                                          -->
                                                      </div>
                                                    </td>
                                                  </tr>
                                                </table> 
                                              </td>
                                            </tr>
                                            <tr class="step4" *ngIf="actionTabId === '4'">
                                              <td class="bd" style="max-width: 130px;">
                                                <div class="outline">
                                                    <mat-form-field appearance="fill">
                                                      <mat-label class="lbl">Date</mat-label>
                                                    <input matInput [matDatepicker]="frompicker" [(ngModel)]="data.uploadDate" (click)="frompicker.open()" autocomplete="off">
                                                    <mat-datepicker-toggle matSuffix [for]="frompicker"></mat-datepicker-toggle>
                                                    <mat-datepicker #frompicker (opened)="onOpenDatePicker(data)" [dateClass]="dateClass"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                              </td>
                                              <td class="bd" style="max-width: 130px;">
                                                <div class="outline">
                                                    <mat-form-field appearance="fill">
                                                      <mat-label class="lbl">Ruleset Name</mat-label>
                                                        <mat-select [(ngModel)]="data.rulesetId">
                                                          <mat-option *ngFor="let rule of data.rules;" [value]="rule.rulesetId">
                                                              {{rule.rulesetName}}
                                                          </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>
                                              </td> 
                                              <td class="bd">
                                                <div class="list flex-containers ml4">
                                                  <div class=" list-item-0  inlb" *ngIf="rights.includes('VIEW_RESULTS')">
                                                    <button class="button3d btnPush btnPurple addico v-p" 
                                                      (click)="launchProfileView(data)" 
                                                      matTooltip="Profile">
                                                      <mat-icon>link</mat-icon>
                                                      Profile
                                                    </button>
                                                  </div>                                     
                                                  <div class="list-item-0 inlb" >
                                                    <button type="button" class="button3d btnPush btnOrange addico"
                                                  matTooltip="">                                           
                                                  DQ monitoring
                                                    </button>
                                                  </div>
                                                  <div class=" list-item-0  inlb" *ngIf="rights.includes('VIEW_RESULTS')">
                                                    <button class="button3d btnPush btnLightBlue addico v-a" 
                                                      [disabled]="!data.rulesetId" 
                                                      (click)="launchAnalysis(data)" 
                                                      matTooltip="View Analysis">
                                                      <mat-icon>launch</mat-icon>
                                                      View Analysis
                                                    </button>
                                                  </div> 
                                                  </div> 
                                              </td>
                                            </tr>
                                            <tr class="step5" *ngIf="actionTabId === '5'">
                                              <td class="bd" style="max-width: 130px;">
                                                <div class="outline">
                                                    <mat-form-field appearance="fill">
                                                      <mat-label class="lbl">Date</mat-label>
                                                    <input matInput [matDatepicker]="frompicker" [(ngModel)]="data.uploadDate" (click)="frompicker.open()" autocomplete="off">
                                                    <mat-datepicker-toggle matSuffix [for]="frompicker"></mat-datepicker-toggle>
                                                    <mat-datepicker #frompicker (opened)="onOpenDatePicker(data)" [dateClass]="dateClass"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                              </td>
                                              <td class="bd" style="max-width: 130px;">
                                                <div class="outline">
                                                    <mat-form-field appearance="fill">
                                                      <mat-label class="lbl">Ruleset Name</mat-label>
                                                        <mat-select [(ngModel)]="data.rulesetId">
                                                          <mat-option *ngFor="let rule of data.rules;" [value]="rule.rulesetId">
                                                              {{rule.rulesetName}}
                                                          </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>
                                              </td>                                       
                                              <td>
                                                <div class="list flex-containers ml3" style="width:300px;">
                                                  <div class=" list-item-0  inlb">
                                                    <button type="button" class="button3d btnPush btnPurple addico w-t"
                                                    (click)="launchDataCleaning(data)" matTooltip="Data Cleaning">
                                                      Data Cleaning
                                                    </button>
                                                  </div>
                                              </div>  
                                              </td>
                                            </tr>
                                          </table>
                                        
                                      </td>
                                    </tr>
                                </table>
                              </td>
                          </tr>
                        
                        </tbody>
                    </table>
                  </div>
              </mat-card>
              
              <h1 class="no-margin ms nTitle">Analysis</h1>
              <mat-card class="border no-rounded list shrare-post mct">
                <div class="viewTable">Views: 
                  <img src="assets/images/chart.svg" class="chartV" (click)="changeViewAnlysis('table')" />
                 <span class="divider"></span> 
                 <img src="assets/images/table.svg" class="tabV" (click)="changeViewAnlysis('chart')" />                  
                </div>
             <div class="chart" *ngIf="showtableAnalysis">  
                <app-progress-bar [message]="'Loading...'" class="component" *ngIf="isOverviewLoading"></app-progress-bar>
                <app-analysis *ngIf="showAnalysisOverview && !overviewErrorMsg" [isOverview]="true"></app-analysis> 
                <h3 *ngIf="overviewErrorMsg">{{overviewErrorMsg}}</h3>
              </div>
              <div class="chart" *ngIf="!showtableAnalysis"> 
                  <app-analysis *ngIf="showAnalysisOverview && !overviewErrorMsg" [isOverviewTable]="true"></app-analysis> 
              </div>   
              </mat-card>
           
            
           

              <div class="allView">
                <div class="viewProfile">
                  <div class="prevMenu" (click)="changeMenu('profile')">
                    <img src="assets/images/profile-data.svg" class="prof"  />
                    <span [ngClass]="{act: previewProfile}">Profile</span>
                  </div>                 
                  <span class="divider"></span> 
                  <div class="prevMenu" (click)="changeMenu('preview')">
                    <img src="assets/images/preview.svg" class="prev"  />
                    <span [ngClass]="{act: previewTable}">Preview</span>
                  </div> 
                  <span class="divider"></span> 
                  <div class="prevMenu" (click)="changeMenu('correlation')">
                    <img src="assets/images/correlation.svg" class="prof"  />
                    <span [ngClass]="{act: previewCorrelation}">Correlation</span>
                  </div>
                </div>
            </div>
            <mat-card class="border no-rounded list shrare-post mct">
              
            <div class="profileView valign" *ngIf="previewProfile">
              <div class="analysis-infoDashboard">
                <div class="category-list-wrapper clearfix">
                  <owl-carousel-o class="selected" [options]="profileOptions">
                    <ng-template carouselSlide *ngFor="let profile of profiles;">
                      <div class="category-item" (click)="changeProfile(profile)" [class.selected]="attrubute === profile.column">
                        {{profile.column}} 
                      </div>
                    </ng-template>                     
                  </owl-carousel-o>                                     
               </div>
              </div>
              <div class="flex-containers prof-details">
                <div class="attribute-details">

                                   <div class="flex-containers">                                    
                    <div class="lft-attr">
                      <h4 class="attr-tite"> <span class="subT m">Attribute Summary</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                      <mat-card class="bg-violet ch"> 
                        <table>
                          <tr>
                            <th>
                              <div class="recordsTop">
                                <span><img src="assets/images/database.svg" class="record" /> records</span>
                                
                             </div>
                             <!-- <div class="dotDiv"></div> -->
                            </th>
                            <th>
                              <div class="recordsTop">
                                <span><img src="assets/images/type.svg" class="record1" /> <span class="dp1"> type</span></span>
                                
                             </div>
       
                             <!-- <div class="dotDiv"></div> -->
                            </th>
                            <th>
                              <div class="recordsTop">
                                <span><img src="assets/images/type.svg" class="record1" /> <span class="dp1"> NULL COUNTS</span></span>
                               
                             </div>
                            </th>
                          </tr>
                          <tr>
                            <td><span class="dp">{{profile.attributeSummary?.records}}</span></td>
                            <td><span class="dp al">{{profile.attributeSummary?.dataType}}</span></td>
                            <td><span class="dp al1">
                              <a href="javascript: void(0)" *ngIf="profile.attributeSummary && profile.attributeSummary.null_records" (click)="showPreviewDetails()">
                                {{profile.attributeSummary?.null_records}}
                              </a>
                              <div *ngIf="profile.attributeSummary && !profile.attributeSummary.null_records">
                                {{profile.attributeSummary?.null_records}}
                              </div>
                            </span></td>
                          </tr>                       
                        </table>                                          
                      </mat-card> 
                    </div>
                    <div class="rgt-attr">
                      <h4 class="attr-tite"> <span class="subT hd">Length Statistics</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                      <mat-card class="honeydew ch" > 
                                            
                          <div class="custom-slider" *ngIf="profile.LengthStatistics">
                            <div class="minMax"> 
                              <div class="values">Min {{profile.LengthStatistics.Min}}</div>
                              <div class="values fr">Max {{profile.LengthStatistics.Max}}</div>
                             </div>
                            <div class="minMax">
                             <div class="dot"></div>
                             <div class="bar"></div>
                             <div class="dot fr"></div>
                            </div>
                            
                             <!-- <ngx-slider [(value)]="profile.LengthStatistics.Min" [(highValue)]="profile.LengthStatistics.Max" [options]="options"></ngx-slider> -->
                          </div>

                          <div class="custom-slider" *ngIf="profile.valueStatistics">
                            <div class="minMax"> 
                              <div class="values">Min {{profile.valueStatistics.MinValLength}}</div>
                              <div class="values fr">Max {{profile.valueStatistics.MaxValLength}}</div>
                             </div>
                            <div class="minMax">
                             <div class="dot"></div>
                             <div class="bar"></div>
                             <div class="dot fr"></div>
                            </div>
                            
                             <!-- <ngx-slider [(value)]="profile.LengthStatistics.Min" [(highValue)]="profile.LengthStatistics.Max" [options]="options"></ngx-slider> -->
                          </div>
                          <!-- <div class="custom-slider" *ngIf="!profile.LengthStatistics">
                           <div class="not-found" *ngIf="!profile.LengthStatistics">
                               Not Available
                           </div>
                        </div> -->
                        <!-- <div class="not-found" *ngIf="!profile.LengthStatistics">
                            Not Available
                       </div> -->
                     </mat-card>
                    </div>
                  </div>

                  <div class="flex-containers"> 
                    <div class="lft-attr"> 
                      <h4 class="attr-tite"> <span class="subT mg">Frequency Groups</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                      <mat-card class="nBg2">
                        <div *ngFor="let domain of domainMatches" class="domain">
                           <button class="btn btn-outline-primary mb-2 mr-2 fs-b"  *ngIf="domain === profile.column" (click)="openScrollableContent(longContent)">View Domain Analysis</button>
                        </div>
                        
                       
                        <div class="viewTableN"> 
                          <img src="assets/images/chart.svg" class="chartV" (click)="changeView('table')" />
                         <span class="divider"></span> 
                         <img src="assets/images/table.svg" class="tabV" (click)="changeView('chart')" />                  
                        </div>
                        <div *ngIf="showtable">
                          <app-pie-chart [pieChartData]="chartData" ></app-pie-chart>
                      </div>
                      <div *ngIf="!showtable">
                        <div class="table-wrapper-scroll-y my-custom-scrollbar">

                          <table class="table table-bordered table-striped mb-0 attTable" *ngIf="profile.frequncyAnalysis && profile.frequncyAnalysis.length">
                            <thead>
                              <tr>
                                <th scope="col">
                                  <div class="records">
                                    <span><img src="assets/images/frequency.svg" class="record1" /> <span class="dp1"> Frequency</span></span>
                                 </div>
                                </th>
                                <th scope="col">
                                  <div class="records">
                                    <span><img src="assets/images/counting.svg" class="record1" /> <span class="dp1"> Count</span></span>
                                 </div>
                                </th>
                                <th scope="col" style="width:24%!important;">&nbsp;</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let frequency of profile.frequncyAnalysis">
                                <td class="tdP">{{frequency.unique_values}}</td>
                                <td class="tdP">{{frequency.counts}}</td>
                                <td>
                                  <mat-progress-bar class="progressbar" mode="determinate" [value]="(frequency.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'" matTooltip="{{(frequency.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'}} %" ></mat-progress-bar> 
                                </td>
                              </tr>
                            
                            </tbody>
                          </table>
                        
                        </div>
            
                      </div>
                      </mat-card>
                    </div>

                    <div class="rgt-attr">
                      
                      <h4 class="attr-tite"> <span class="subT gb">Correlation Summary</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                     <mat-card class="bg-green ch2" style="height:319px;" [ngClass]="{'my_class': step === 'step1'}">                       
                        <app-corelation-summary [summary]="profile.correlationSummary"></app-corelation-summary> 
                        <!-- <highcharts-chart
                              [Highcharts] = "highcharts" 
                              [options] = "chartOptions" 
                              style = "width: 100%; height: 400px; display: block;">
                           </highcharts-chart> -->
                     </mat-card>  
                      <!-- <h4 class="attr-tite"> <span class="subT mg">CORRELATION SUMMARY</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                      <mat-card class="nBg">
                        <div class="viewTableN"> 
                          <img src="assets/images/chart.svg" class="chartV" (click)="changeView('table')" />
                         <span class="divider"></span> 
                         <img src="assets/images/table.svg" class="tabV" (click)="changeView('chart')" />                  
                        </div>
                        <highcharts-chart
                              [Highcharts] = "highcharts" 
                              [options] = "chartOptions" 
                              style = "width: 100%; height: 400px; display: block;">
                           </highcharts-chart> 
                      </mat-card>-->
                    
    
                      
                    </div>
                  </div>



                  <div class="flex-containers">                                    
                  <div class="lft-attr">
                   
                    
                 
                    
                    


                    <!-- <h4 class="attr-tite"> <span class="subT mg">Frequency Groups</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                    <mat-card class="bg-magenta ch1" *ngIf="profile.frequncyAnalysis && profile.frequncyAnalysis.length">                     
                      <div class="frequencyContainer" [class.frequencyShow]="frequencyShow">
                      <table>
                         <tr>
                            <th>
                              <div class="records">
                                <span><img src="assets/images/frequency.svg" class="record1" /> <span class="dp1"> Frequency</span></span>
                             </div>
                              </th>
                            <th>
                              <div class="records">
                                <span><img src="assets/images/counting.svg" class="record1" /> <span class="dp1"> Count</span></span>
                             </div>
                            <th style="width:20%">&nbsp;</th>
                         </tr>
                         <tr *ngFor="let frequency of profile.frequncyAnalysis">
                            <td class="fst">{{frequency.unique_values}}</td>
                            <td class="mid">{{frequency.counts}}</td>
                            <td>
                               <mat-progress-bar mode="determinate" [value]="(frequency.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'" matTooltip="{{(frequency.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'}} %" ></mat-progress-bar> 
                             
                            </td>
                         </tr>
                      </table>
                   </div>
                   <button *ngIf="profile.frequncyAnalysis.length > 3" class="frequencyBtn" (click)="frequencyShow = !frequencyShow">
                      <mat-icon *ngIf="!frequencyShow">expand_more</mat-icon> <mat-icon *ngIf="frequencyShow">expand_less</mat-icon> </button>  
                   </mat-card> -->

                   <h4 class="attr-tite" *ngIf="profile.patternAnalysis && profile.patternAnalysis.length"> <span class="subT pt">Pattern Analysis</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>

                   <mat-card class="bg-blue ch1" *ngIf="profile.patternAnalysis && profile.patternAnalysis.length">
                    <div >
                    <div class="frequencyContainer" [class.patternShow]="patternShow">
                      <table>
                        <tr>
                           <th>
                             <div class="records">
                               <span><img src="assets/images/value.svg" class="record1" /> <span class="dp1"> Value</span></span>
                            </div>
                             </th>
                           <th>
                             <div class="records">
                               <span><img src="assets/images/counting.svg" class="record1" /> <span class="dp1"> Count</span></span>
                            </div>
                           <th style="width:20%">&nbsp;</th>
                        </tr>
                        <tr *ngFor="let pattern of profile.patternAnalysis">
                          <td>{{pattern.unique_values}}</td>
                          <td class="mid">{{pattern.counts}}</td>
                          <td>
                             <mat-progress-bar mode="determinate" [value]="(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2' " matTooltip="{{(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'}} %"></mat-progress-bar> 
                          
                            <!-- <mat-slider 
                            min="0" 
                            max="100" 
                            step="1" 
                            [value]="(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'"
                            matTooltip="{{(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'}} %"
                            >
                            </mat-slider> -->
                          </td>
                       </tr>
                     </table>
                    <!-- <table>
                       <tr>
                          <th><img src="assets/images/value.svg" class="freq" /> Value </th>
                          <th>Count <img src="assets/images/count.png" class="freq" /></th>
                          <th style="width:20%">&nbsp;</th>
                       </tr>
                       <tr *ngFor="let pattern of profile.patternAnalysis">
                          <td>{{pattern.unique_values}}</td>
                          <td>{{pattern.counts}}</td>
                          <td><mat-progress-bar mode="determinate" [value]="(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2' " matTooltip="{{(pattern.counts * 100) / profile.attributeSummary?.records | number:'1.0-2'}} %"></mat-progress-bar></td>
                       </tr>
                    </table> -->
                 </div>
                 <button *ngIf="profile.patternAnalysis.length > 3" class="patternBtn" (click)="patternShow = !patternShow"><!--  {{ patternShow ? 'Show less'  : 'Show More'  }} -->
                    <mat-icon *ngIf="!patternShow">expand_more</mat-icon> <mat-icon *ngIf="patternShow">expand_less</mat-icon> </button> 
                  </div>
                 <!-- <ng-template #noPattern>
                  <div class="not-found" >Not Available</div> 
                 </ng-template> -->
                 </mat-card>
                  
                 <div *ngFor="let domain of domainMatches">
                        
                  <mat-card  class="bg-violet ch" *ngIf="domain === profile.column"> 
                    <table>
                      <tr>
                        <th>
                          <div class="recordsTop">
                            <span><img src="assets/images/airport.svg" class="record" /> Domain Analysis</span>                                  
                         </div>
                        </th>
                                                
                      </tr>
                      <tr >
                        <td><span class="dp" *ngIf="domain === profile.column">IATA Code</span></td>
                        
                      </tr>                       
                    </table>                                          
                  </mat-card> 
                </div>
                  </div>
                  <div class="rgt-attr">
                    <!-- <app-pie-chart ></app-pie-chart>  -->
                    <!-- <mat-card class="wt2">
                        <h4 class="attr-tite">Count <mat-icon matTooltip="Info about the action">info</mat-icon></h4>
                        <div class="records">
                           <highcharts-chart
                              [Highcharts] = "highcharts" 
                              [options] = "chartOptions" 
                              style = "width: 100%; height: 400px; display: block;">
                           </highcharts-chart>
               
                        </div>                          
                     </mat-card>  -->
                     <!-- <h4 class="attr-tite"> <span class="subT hd">Length Statistics</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                     <mat-card class="honeydew ch" > 
                                           
                         <div class="custom-slider" *ngIf="profile.LengthStatistics">
                           <div class="minMax"> 
                             <div class="values">Min {{profile.LengthStatistics.Min}}</div>
                             <div class="values fr">Max {{profile.LengthStatistics.Max}}</div>
                            </div>
                           <div class="minMax">
                            <div class="dot"></div>
                            <div class="bar"></div>
                            <div class="dot fr"></div>
                           </div>
                           
                         </div>
                         <div class="custom-slider" *ngIf="!profile.LengthStatistics">
                          <div class="not-found" *ngIf="!profile.LengthStatistics">
                              Not Available
                          </div>
                       </div>
                    </mat-card> -->

                    
                    
                    <h4 class="attr-tite" *ngIf="profile.maskAnalysis && profile.maskAnalysis.length"> <span class="subT ac">Mask Analysis</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                     <mat-card class="aliceblue ch1" *ngIf="profile.maskAnalysis && profile.maskAnalysis.length">
                       <div >                       
                        <div class="frequencyContainer" [class.maskShow]="maskShow" >
                          <table>
                            <tr>
                               <th>
                                 <div class="records">
                                   <span><img src="assets/images/value.svg" class="record1" /> <span class="dp1"> Value</span></span>
                                </div>
                                 </th>
                               <th>
                                 <div class="records">
                                   <span><img src="assets/images/counting.svg" class="record1" /> <span class="dp1"> Count</span></span>
                                </div>
                               <th style="width:20%">&nbsp;</th>
                            </tr>
                            <tr *ngFor="let mask of profile.maskAnalysis">
                              <td>{{mask.unique_values}}</td>
                              <td class="mid">{{mask.counts}}</td>
                              <td>
                                 <mat-progress-bar mode="determinate" [value]="(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'" matTooltip="{{(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'}} %"></mat-progress-bar> 
                                <!-- <mat-slider
                              min="0" 
                              max="100" 
                              step="1" 
                              [value]="(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'"
                              matTooltip="{{(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'}} %"
                              >
                              </mat-slider> -->
                              </td>
                           </tr>
                         </table>
                        <!-- <table>
                           <tr>
                              <th>Value <img src="assets/images/value.svg" class="freq" /></th>
                              <th>Count <img src="assets/images/count.png" class="freq" /></th>
                              <th style="width:20%">&nbsp;</th>
                           </tr>
               
                           <tr *ngFor="let mask of profile.maskAnalysis">
                              <td>{{mask.unique_values}}</td>
                              <td>{{mask.counts}}</td>
                              <td><mat-progress-bar mode="determinate" [value]="(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'" matTooltip="{{(mask.counts * 100)/ profile.attributeSummary?.records | number:'1.0-2'}} %"></mat-progress-bar></td>
                           </tr>
                        </table> -->
                     </div>
                    <button *ngIf="profile.maskAnalysis.length > 3" class="maskShowBtn" (click)="maskShow = !maskShow">  <!-- {{ maskShow ? 'Show less'  : 'Show More'  }} -->
                        <mat-icon *ngIf="!maskShow">expand_more</mat-icon> <mat-icon *ngIf="maskShow">expand_less</mat-icon> </button> 
                      </div>
                      <!-- <ng-template #noMask>
                        <div class="not-found">Not Available</div> 
                      </ng-template>                                                                   -->
                     </mat-card>
                     <!-- <mat-card class="os aliceblue" *ngIf="profile.staticalAnalysis">
                        <h4 class="attr-tite">Statistics <mat-icon matTooltip="Info about the action">info</mat-icon></h4>
                        <table class="table">
                           <tr class="cpt">
                           <td class="strong" *ngFor="let stats of profile.staticalAnalysis | keyvalue">{{stats.key}}</td>
                           </tr>
                           <tr class="cpt1">
                           <td *ngFor="let stats of profile.staticalAnalysis | keyvalue">{{stats.value}}</td>
                           </tr>
                        </table>
                     </mat-card> -->
                     <!-- <h4 class="attr-tite"> <span class="subT gb">Correlation Summary</span> <i class="fa fa-info-circle info"  matTooltip="Info about the action"></i></h4>
                     <mat-card class="bg-green ch2">                       
                        <app-corelation-summary [summary]="profile.correlationSummary"></app-corelation-summary> 
                       
                     </mat-card> -->
      
                  </div>  
                 
                </div>


                </div>             
            </div>

            </div>

            <div class="previewView valign" *ngIf="previewTable">
              <app-ag-grid
              floatingFilter="true"
              *ngIf="isPreviewLoaded"
              [rowData]="rowData"
              [columnDefs]="columnDefs"
              [pageSize]="50"
              [rowSelection]="'multiple'"
              [suppressRowClickSelection]="false"
            ></app-ag-grid>
          </div>

          <div class="correlationView valign" *ngIf="previewCorrelation">            
            <app-progress-bar [message]="'Loading'" class="component" *ngIf="isLoading"></app-progress-bar>
            <h1 class="share-post-title"><span class="lgb">Correlation Summary</span></h1>
            <div class="flex-containers">
              <div class="list-item-4">
                <mat-form-field appearance="fill">
                  <mat-label class="lbl">Data Type</mat-label>
                  <mat-select [(ngModel)]="datatype" (ngModelChange)="changeType($event)">
                    <mat-option value="mixed">Mixed</mat-option>
                    <mat-option value="numeric">Numeric</mat-option>
                    <mat-option value="categorical">Categorical</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="list-item-4">
                <mat-form-field appearance="fill">
                  <mat-label class="lbl">Method</mat-label>
                  <mat-select [(ngModel)]="method" (ngModelChange)="loadCorrelation(selectedSource, datatype, $event)">
                    <mat-option *ngIf="datatype === 'numeric'" value="pearson">Pearson</mat-option>
                    <mat-option *ngIf="datatype === 'numeric'" value="kendall">Kendall</mat-option>
                    <mat-option *ngIf="datatype === 'numeric'" value="spearman">Spearman</mat-option>
                    <mat-option *ngIf="datatype === 'categorical'" value="theils_u">Theils_U</mat-option>
                    <mat-option *ngIf="datatype === 'categorical'" value="cramers_v">Cramers_V</mat-option>
                    <mat-option *ngIf="datatype === 'mixed'" value="">Correlation Ratio</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>                
          <app-heat-map [columns]="coMatrix.columns" *ngIf="coMatrix.matrix" [data]="coMatrix.matrix" [isOverview]="true"></app-heat-map>
          <mat-card class="no-data-msg" *ngIf="!coMatrix.matrix">
            <h3>No correlations.</h3>
          </mat-card>
        </div>


            </mat-card>
              
            </div>




          </div>

          </div>

        </div>
      </div> 
    </div>

  </div>
</section>
