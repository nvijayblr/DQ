<section class="page-body home-bodys wts">
  <div class="container">
     <h1 class="attTitle">REFERNCE DATA</h1>
     <div>
      <button  class="btnBlueGreenN addico" routerLink="/auth/add-source-data/mango-db">UPLOAD SOURCE</button>
    </div>
      <button  class="btnBlueGreenN addico blue" (click)="getDBCollections()">GET DB COLLECTIONS</button>
      <div class="loader-12" *ngIf="isLoadingDB" style="margin-top:40px;"></div>
      <div *ngIf="showAllDetails">
        <form [formGroup]="getDB">
          <div class="list flex-containers flex-start wrap">
            <div class="list-item-2 outline wth">
                <div class="list outline m49"> 
                  <mat-label>Database</mat-label>
                  <mat-form-field appearance="fill"> 
                    <mat-label>Database</mat-label>                       
                    <mat-select formControlName="database" (selectionChange)='onOptionsSelected($event.value)'>
                      <mat-option *ngFor="let srcDB of db" value="{{srcDB}}">
                        {{srcDB}}
                      </mat-option>                                    
                    </mat-select>
                  </mat-form-field>                  
              </div>
          </div>

          <div class="list-item-2 outline wth">
            <div class="list outline m49"> 
              <mat-label>Database Collection</mat-label>
              <mat-form-field appearance="fill"> 
                <mat-label>Database Collection</mat-label>                       
                <mat-select formControlName="databaseCollection">
                  <mat-option *ngFor="let srcDB of dbCollections" value="{{srcDB}}">
                    {{srcDB}}
                  </mat-option>                                    
                </mat-select>
              </mat-form-field>                  
          </div>
      </div>

          </div>
        </form>
      <div>
        <button  class="btnBlueGreenN addico" (click)="getDBPreview()">GET DB PREVIEW</button>
      </div>
      </div>
      <div class="loader-12" *ngIf="isLoadingCO" style="margin-top:40px;"></div>
      <div style="clear: both;">
        <app-ag-grid
            floatingFilter="true"
            *ngIf="isPreviewLoaded"
            [rowData]="rowData"
            [columnDefs]="columnDefs"
            [pageSize]="50"
            [rowSelection]="'multiple'"
            [suppressRowClickSelection]="false"     
            ></app-ag-grid>
      </div>

     <div class="input-group has-search">
      <span class="fa fa-search form-control-feedback"></span>
      <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
        aria-describedby="search-addon" [(ngModel)]='searchValue' (keyup.enter)="applySearch($event.target.value)"/>
      <button type="button" class="btn btn-primary" (click)="applySearch(searchValue)">search</button>
    </div>
    <div class="loader-12" *ngIf="isLoading"></div>
       <div class="mbt" *ngFor="let header of allObjHeader; let i = index;">
        <h2 class="nTitle">{{header}}</h2>
        <table class="table table-bordered table-striped mb-0 attTable" >                  
          <thead scope="col">
            <tr>
              <th scope="col" *ngFor="let keyh of allObjKeys[i]">
                {{keyh}}
              </th>             
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let collection of collections[i]"> 
              <td *ngFor="let item of collection">
              {{item}}
              </td>
            </tr>
          
          </tbody>
        </table>
      </div> 
  </div>
</section>



    
